## Overview
_**devopsfetch**_ is a Bash script designed for server information retrieval and monitoring. It collects and displays system information including active ports, user logins, Nginx configurations, Docker images, and container statuses. Additionally, it supports continuous monitoring with logging.

## Features
Display all active ports and services or details of a specific port.
List all Docker images and containers or details of a specific container.
Display all Nginx domains, proxies, and configuration files in table format or details of a specific domain.
List all users and their last login times or details of a specific user.
Display activities within a specified time range.
Continuous monitoring with logging and log rotation.

### 1. Installation and Configuration Steps

Prerequisites

Ensure you have the following installed on your system:

- Bash (v4.0 or later)
- netstat for network statistics (usually part of the net-tools package)
- Docker
- Nginx
- column for table formatting
- awk for text processing
- journalctl for viewing logs (part of systemd)

**Installation**

Download the Script:

Save the devopsfetch.sh script to your desired directory.

Make the Script Executable:

```bash
chmod +x devopsfetch.sh
```

Optional: Move the Script to a Directory in Your PATH:

```bash
sudo mv devopsfetch.sh /usr/local/bin/devopsfetch
```

**Configuration**
Ensure you have the necessary permissions to run the commands used in the script. You might need to run the script with sudo for certain operations like viewing active ports or Nginx configurations.

### 2. Usage Examples for Each Command-Line Flag
Help
Display usage instructions:

bash
Copy code
devopsfetch -h
Ports
Display all active ports and services:

```bash
devopsfetch -p
```
Display details of a specific port (e.g., port 80):

```bash
devopsfetch -p 80
```
Docker
List all Docker images and containers:

```bash
devopsfetch -d
```
Display details of a specific Docker container (e.g., container my_container):

```bash
devopsfetch -d my_container
```
Nginx
Display all Nginx domains, proxies, and configuration files in table format:

```bash
devopsfetch -n
```
Display details of a specific Nginx domain (e.g., example.com):

```bash
devopsfetch -n example.com
```
Users
List all users and their last login times:

```bash
devopsfetch -u
```
Display details of a specific user (e.g., user john):

```bash
devopsfetch -u john
```

Time Range

Display activities within a specified time range (e.g., from 2024-01-01 to 2024-01-02):

```bash
devopsfetch -t 2024-01-01 2024-01-02
```

### 3. Logging Mechanism and How to Retrieve Logs

**Continuous Monitoring and Logging**

The devopsfetch script can be configured to run continuously and log activities. The logging mechanism involves setting up a systemd service.

- Setup Systemd Service for Continuous Monitoring

Create a Systemd Service File:

Create a file named devopsfetch.service in /etc/systemd/system/:

```
Unit
Description=DevOps Fetch Continuous Monitoring Service
After=network.target

Service
ExecStart=/path/to/devopsfetch.sh --monitor
Restart=always

Install
WantedBy=multi-user.target
Replace /path/to/devopsfetch.sh with the actual path to the script.
```

Reload Systemd Daemon:

```bash
sudo systemctl daemon-reload
Start the Service:
```

``
sudo systemctl start devopsfetch.service
```
Enable the Service to Start on Boot:

```bash
sudo systemctl enable devopsfetch.service
```

**Log Rotation and Management**

Logs generated by the devopsfetch script can be managed using logrotate.

- Create a Logrotate Configuration File:

Create a file named devopsfetch in /etc/logrotate.d/:



        /var/log/devopsfetch.log {
            daily
            rotate 7
            compress
            missingok
            notifempty
            create 0640 root adm
        }


- Ensure the Script Logs Output to /var/log/devopsfetch.log:

Modify the devopsfetch.sh script to log output:

```bash
#!/bin/bash

LOG_FILE="/var/log/devopsfetch.log"

# Redirect output to log file
exec >> "$LOG_FILE" 2>&1

# Existing script content...
```

**Retrieve Logs**

To view the logs generated by the devopsfetch script:

View the Latest Logs:

```bash
sudo tail -f /var/log/devopsfetch.log
```

View Rotated Logs:
Rotated logs are compressed and stored with a .gz extension:

```
bash
sudo zcat /var/log/devopsfetch.log.1.gz
```

#### Conclusion

The devopsfetch script provides a comprehensive set of tools for server information retrieval and monitoring. With the ability to display various system metrics and log activities continuously, it is a valuable tool for DevOps engineers. Follow the installation and configuration steps to set up the script and refer to the usage examples for effective utilization. The logging mechanism ensures that you can monitor system activities continuously and manage logs efficiently.














#### Useful Tip



    
     
- **Creating a Logrotate Configuration File for devopsfetch**

logrotate is a utility designed to manage the automatic rotation and compression of log files. To ensure the logs generated by devopsfetch are managed properly, we will create a logrotate configuration file.

Steps to Create and Configure Logrotate for devopsfetch

Create the Logrotate Configuration File:

Open a terminal window.

Create a new file named devopsfetch in the /etc/logrotate.d/ directory using a text editor (e.g., nano, vi).

```bash
sudo nano /etc/logrotate.d/devopsfetch
```

Add Configuration Directives:

Add the following content to the devopsfetch file. This configuration tells logrotate how to handle the /var/log/devopsfetch.log file.

```
/var/log/devopsfetch.log {
    daily                # Rotate the log file daily
    rotate 7             # Keep 7 days' worth of backlogs
    compress             # Compress the rotated log files
    missingok            # Do not issue an error if the log file is missing
    notifempty           # Do not rotate the log if it is empty
    create 0640 root adm # Create a new log file with specified permissions
}
```


- Here is an explanation of each directive:

daily: Rotate the log file daily.
rotate 7: Keep 7 rotated log files before deleting old ones.
compress: Compress the rotated log files to save space.
missingok: If the log file is missing, do not issue an error.
notifempty: Do not rotate the log file if it is empty.
create 0640 root adm: Create a new log file after rotation with permissions set to 0640, owned by root and group adm.
Save and Close the File:

Save the changes and close the text editor (in nano, press Ctrl+X, then Y, and Enter).
Verify Logrotate Configuration
To ensure the logrotate configuration for devopsfetch is working correctly, you can force logrotate to run and check the results:

Run Logrotate Manually:

```bash
sudo logrotate -f /etc/logrotate.d/devopsfetch
```

This command forces logrotate to process the devopsfetch configuration file immediately.

Check the Logs Directory:

After running logrotate, check the /var/log directory to see the rotated log files. You should see compressed log files like devopsfetch.log.1.gz, devopsfetch.log.2.gz, etc.

```bash
ls -l /var/log/devopsfetch*
```

Managing Logs

View the Latest Log File:

```bash
sudo tail -f /var/log/devopsfetch.log
```

View Older Rotated Logs:

Rotated logs are compressed with .gz extension. Use zcat or zless to view them.

```bash
sudo zcat /var/log/devopsfetch.log.1.gz
```

Configure Systemd Service for Continuous Logging:

Ensure the devopsfetch.sh script logs output to /var/log/devopsfetch.log by modifying the script:

```bash
#!/bin/bash

LOG_FILE="/var/log/devopsfetch.log"

# Redirect output to log file
exec >> "$LOG_FILE" 2>&1
```

With these steps, you will have set up a robust logging mechanism for the devopsfetch script, ensuring logs are rotated and managed efficiently, preventing disk space issues and keeping log data organized.












# Flask Web App Tutorial

## Setup & Installation

Make sure you have the latest version of Python installed.

```bash
git clone <repo-url>
```

```bash
pip install -r requirements.txt
```

## Running The App

```bash
python main.py
```

## Viewing The App

Go to `http://127.0.0.1:5000`
